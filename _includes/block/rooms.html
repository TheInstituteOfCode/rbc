
<section>
      <div class="max-width w-full">
        {% for style in block.room-style %}
        <div class="scheme-base style-set {% unless forloop.first %} mt-vert {% endunless %} pb-16">
          <div class="flex justify-between flex-wrap">
            <h2 class="shrink-0 sub-heading my-0 relative -top-2">{{style.heading}}</h2>
            <div class="shrink-0 flex justify-end flex-wrap max-w-full grow">
              {% for room in style.rooms %}
              <span class="bg-base filter-tab {% if forloop.first %} active {% endif %}" data-filter="{{forloop.index0}}">{{room.name}}</span>
              {% endfor %}
            </div>
          </div>
          <div>

            <div class="grid md:grid-cols-2 gap-4 bg-base">
              <div class="relative rooms-gallery">
                <div style="aspect-ratio: 217/148">
                  {% for image in style.images %}
                  <img class="h-full w-full inset-0 absolute object-cover object-center gallery-image" src="{{image}}" alt="{{style.heading}}">
                  {% endfor %}
                </div>

              </div>
              {% for room in style.rooms %}
              <div class="filter-target bg-base {% if forloop.first %} active {% endif %} items-center p-8">
                <div>
                  
                  <h2 class="">{{room.name}}</h2>
                  <div class="flex gap-x-8 flex-wrap text-sm engravers-gothic mb-4">
                    <span class="whitespace-nowrap">
                      {{room.size}} SQ/FT
                    </span>
                    <span class="whitespace-nowrap">
                      {{room.bed-size}}
                    </span>
                    <span class="whitespace-nowrap">
                      {{room.sleeps}} Guests
                    </span>
                    {% for extra-feature in room.extra-feature %}
                      <span class="whitespace-nowrap">{{extra-feature}}</span>
                    {% endfor %}
                  </div>
                  <div>
                    <p>
                      {{room.content}}
                    </p>
                    <p class="scheme-dark">
                      <a href="/" class="button-featured"> Reserve Now</a>
                      <span class="button button-dialog cursor-pointer">take a tour</span>
                    </p>
                    <dialog class="outline-none">
                      <span class="dialog-close-X cursor-pointer">X</span>
                      <img src="{{room.tour-pic}}" alt="{{room.name}} layout" >
                    </dialog>

                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
          </div>
        </div>
        {% endfor %}
        
      </div>
    </section>


<style>
       #section-{{forloop.index}} section{
        min-height: {{block.min-height}};
      }

      .gallery-image.active{
        z-index: 99;
      }
 
.filter-tab {
  transition: all .5s;
  border-color:#D5E3DD;
  border: 1px solid;
  font-size: 0.8rem;
  padding: 0.5rem 2rem;
}

.filter-tab:not(.active) {
  background-color: #E1EAE5;
  border-color: #D5E3DD
  /* color: var(--colored-button-text); */
}

      .filter-target{
        display: none;
      }
      .filter-target.active{
        display: flex;
      }


.dialog-close-X {
  position: absolute;
  top: 1rem;
  right: 1rem;
  cursor: pointer;
  font-size: 1.5rem;
  border: none;
  background: none;
}
</style>
<script>

const tourButtons = document.querySelectorAll('.button-dialog')
console.log("tour buttons".tourButtons)
tourButtons.forEach(button => {
  button.addEventListener('click', () => {
    const dialog = button.parentElement.nextElementSibling
    console.log(dialog)
    dialog.showModal()
  })
})

const dialogs = document.querySelectorAll('dialog')
dialogs.forEach(dialog => {
        dialog.addEventListener('click', (event) => {
         if (event.target === dialog) {
             // This code will execute when the backdrop is clicked
            //  console.log('Backdrop clicked!');
             // Example: Close the dialog
            dialog.close();
         }
         
        })
    })

    const closeButtons = document.querySelectorAll('.dialog-close-X')
    closeButtons.forEach(button => {
      button.addEventListener('click', () => {
        button.parentElement.close()
      })
    })

const styles = document.querySelectorAll('.style-set')

styles.forEach(style => {
  let filterButtons = style.querySelectorAll('span[data-filter]')
  let slides = style.querySelectorAll('.filter-target')
  let currentIndex = 0

  function updateSlide(x) {
      slides.forEach(slide => {
        slide.classList.remove('active');
      if (slides[x] == slide)
      slide.classList.add('active') 
      })
      console.log('something happened')
        
  }

  filterButtons.forEach(button => {
    let target = button.dataset.filter
    console.log(target)
    button.addEventListener('click', () => {
      filterButtons.forEach(eachButton => {
        eachButton.classList.remove('active')
      })
      button.classList.add('active')
      updateSlide(target)
      console.log('something happened')

    })

  })

  
})

</script>